# ЯМы Линукс и зачем нам это все знать, все это мы будем рассматривать с точки зрения что можно сломать и как проникнуть в систему

0. Вам, как админам, придется разбираться в проблемах и понимать чего нельзя/можно делать
1. Практически все сервисы работают на серваках под линуксом и вы это тоже знаете
2. Обычно разработчики пишут что-то под докер/кубер и вское разнообразие, которое где-то работает


# Что происходит когда мы запускаем сервак/ноут вообще?

1. Процессор когда включается, то он запускает BIOS, который в свою очередь:
    - первым шагом запускает POST - чекает все оборудование
    - смотрит на разметку дисков (MBR/GPT) и ищет устройство с которого можно загрузиться `efibootmgr -v`
    - на дисках есть загрузочный сектор в котором есть небольшой код какого-то загрузчика
    - Знаете ли вы какие-то загрузчики? (grub а что еще есть?)
    - В конфиге/загрузчике можно увидеть загрузочные записи откуда мы будем запускать Ядро линукса
    - Тк все находится на системе, то вы можете посмотреть у себя конфиг граба
    ```bash
    grep menuentry  /boot/grub/grub.cfg
    ```
2. Ядро Linux (kernel)
- компилируется ядро
- монтируется initramfs и распаковывается все файловая система
- запускается init скрипт, который управляем всей системой

3. Что такое Init?
Исходно задача init - управлять процессами
У нас есть:
- systemd
- openrc
- runit
- и какая-то бла бла

А еще можно сделать свой кастомный скрипт, передать в ядро агрумент запуска init и будет просто ваш скриптик

Но так получилось, что практически везде используется systemd
Systemd это и плюс и минус, но для домашнего использования вообще без разницы какой init будет, он не принесет проблем
Как можно посмотреть какой у вас init - `pstree`

В systemd у нас есть сервисы `systemctl list-unit-files`
К примеру если мы базово ставим nginx - то можно глянуть что запускается при старте

# TLDR
BIOS (запускается какая-то программка) -> Проверяется железо -> ищем загрузчик -> загрузчик инициализирует все модули -> инициализируется ядро -> инит systemd -> инициализируется nginx

4. А теперь самое главное - что такое процесс и зачем оно надо
Все в системе состоит из процессов, всегда что-то крутится
Что такое процесс - абстракция, какое-то количество ресурсов системы выделенное на выполнение говнокода
У каждого процесса есть свой pid (process id банально да)
Как посмотреть какие процессы у меня сейчас запущены?
А как посмотреть более детальную информацию про процесс?
- мы можем посмотреть в целом всю информацию про процесс /proc/<pid>/ бла бла бла
- какие файлы он использует? lsof может показать все все
- где какие порты он использует?
Что есть порт? - это тоже файлик

К примеру у меня есть nginx работающий
- ps aux | grep nginx
- netstat -tulpn | grep nginx
- ss -tulpn | grep nginx


