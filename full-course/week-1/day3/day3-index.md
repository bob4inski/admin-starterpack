# День 3: Устройство Linux и процессы

## Обзор занятия

В этот день мы углубимся в устройство операционной системы Linux, изучим файловую структуру, права доступа, процессы и системные вызовы. В практической части мы освоим команды для работы с процессами, файловой системой и текстовыми данными, а также научимся создавать полезные однострочники для системного администрирования.

## Цели занятия

- Понять файловую структуру Linux и философию Unix
- Изучить дискреционную модель доступа
- Освоить работу с процессами и сигналами
- Научиться эффективно использовать команды для работы с текстом
- Создавать полезные однострочники для автоматизации задач

## Структура материалов

### Основные материалы
- [Лекционные материалы](day3-linux-internals.md) - теория по устройству Linux и процессам
- [Практическое руководство](day3-practice-guide.md) - задания для работы с командами
- [Шпаргалка по командам](day3-commands-cheatsheet.md) - справочник команд и однострочников

### Для преподавателя
- [Руководство для преподавателя](day3-teacher-guide.md) - методические рекомендации и план занятия

## План занятия

### Первая пара (90 минут) - Лекция: Устройство Linux и процессы

#### Введение (10 минут)
- Обсуждение предыдущего занятия
- Объяснение плана текущего занятия
- Важность понимания устройства Linux

#### Теоретическая часть (70 минут)
1. Базовые команды в терминале
2. Устройство Linux: файловая структура
3. Дискреционная модель доступа
4. Процессы и procfs
5. Сигналы и системные вызовы

#### Заключение (10 минут)
- Обобщение изученного материала
- Ответы на вопросы
- Краткий обзор практической части

### Вторая пара (90 минут) - Практика: Команды для работы в терминале

#### Введение в практическую часть (10 минут)
- Объяснение целей практической работы
- Демонстрация примеров однострочников
- Обзор практических заданий

#### Практическая работа (70 минут)
1. Работа с процессами
2. Работа с файловой системой
3. Работа с текстом и данными
4. Создание однострочников

#### Заключение (10 минут)
- Проверка результатов
- Обсуждение проблем и решений
- Объяснение домашнего задания

## Необходимое программное обеспечение

### Базовые утилиты Linux
- coreutils (базовые утилиты: ls, cp, mv, rm, и т.д.)
- procps (работа с процессами: ps, top, kill)
- findutils (поиск файлов: find, locate)
- textutils (работа с текстом: grep, sed, awk)

### Дополнительные утилиты
- htop (улучшенный монитор процессов)
- tree (отображение директорий в виде дерева)
- ack (улучшенный поиск по тексту)

## Подготовка к занятию

### Перед занятием
1. Убедитесь, что у вас установлены все необходимые утилиты
2. Создайте рабочую директорию для практических заданий
3. Подготовьте тестовые файлы для практики
4. Изучите основные команды из предыдущих занятий

### Во время занятия
1. Следуйте инструкциям преподавателя
2. Не бойтесь экспериментировать с командами
3. Задавайте вопросы, если что-то непонятно
4. Сохраняйте полезные команды и однострочники

## Практические задания

### Задание 1: Работа с процессами
- Просмотр и поиск процессов
- Управление процессами
- Изменение приоритетов
- Создание скрипта для мониторинга процессов

### Задание 2: Работа с файловой системой
- Просмотр использования дискового пространства
- Поиск файлов
- Работа с правами доступа
- Создание скрипта для очистки временных файлов

### Задание 3: Работа с текстом и данными
- Поиск и фильтрация текста
- Обработка потоков данных
- Сортировка и уникальные значения
- Создание скрипта для анализа логов

### Задание 4: Создание однострочников
- Поиск и замена в файлах
- Переименование файлов по шаблону
- Мониторинг системных ресурсов
- Использование регулярных выражений

## Критерии выполнения

- [ ] Понимание файловой структуры Linux
- [ ] Умение работать с правами доступа
- [ ] Навыки работы с процессами
- [ ] Умение использовать основные команды
- [ ] Созданы полезные однострочники
- [ ] Выполнено домашнее задание

## Домашнее задание

1. Изучить структуру файловой системы вашей системы
2. Создать скрипт для мониторинга системных ресурсов
3. Написать 5 полезных однострочников для системного администрирования
4. Подготовить отчёт о проделанной работе с примерами команд

## Полезные ресурсы

### Документация
- [Linux Documentation Project](https://tldp.org/)
- [GNU Coreutils Manual](https://www.gnu.org/software/coreutils/manual/)
- [Arch Linux Wiki](https://wiki.archlinux.org/)
- [Regular-Expressions.info](https://www.regular-expressions.info/)

### Видеоматериалы
- [Linux Command Line Tutorial](https://www.youtube.com/playlist?list=PLS1QulWo1RIaTncwlf1HTYRzidZGj3uRU)
- [Awk Tutorial](https://www.youtube.com/watch?v=Op6UIKq9SAs)
- [Sed Tutorial](https://www.youtube.com/watch?v=UBhh9PF_3R0)

### Интерактивные ресурсы
- [ExplainShell](https://explainshell.com/)
- [Commandlinefu](https://www.commandlinefu.com/)
- [Regex101](https://regex101.com/)

## Часто задаваемые вопросы

### В: Зачем изучать все эти команды, если есть графические интерфейсы?
О: Командная строка обеспечивает автоматизацию, работает на удалённых серверах, быстрее для многих задач.

### В: Как запомнить все эти команды?
О: Не нужно запоминать всё. Используйте man-страницы, --help, историю команд и шпаргалки.

### В: В чем разница между системными вызовами и библиотечными функциями?
О: Системные вызовы обращаются напрямую к ядру, библиотечные функции могут использовать системные вызовы.

### В: Как безопасно использовать команды с правами суперпользователя?
О: Всегда проверяйте команду перед выполнением, используйте sudo вместо прямого входа root.

### В: Как отладить сложный однострочник?
О: Разбейте на части, проверяйте вывод каждой команды, используйте tee для промежуточных результатов.

## Примеры полезных однострочников

### Анализ системы
```bash
# 10 самых больших файлов в текущей директории
find . -type f -exec ls -lah {} \; | sort -rh | head -n 10

# Процессы, потребляющие больше всего памяти
ps aux --sort=-%mem | head -n 10

# Подключения к сети
netstat -ntu | awk 'NR>1 {print $5}' | cut -d: -f1 | sort | uniq -c | sort -nr
```

### Работа с файлами
```bash
# Поиск и замена в файлах
find . -name "*.txt" -exec sed -i 's/old_text/new_text/g' {} \;

# Создание резервной копии с датой
tar -czf backup_$(date +%Y%m%d_%H%M%S).tar.gz /path/to/directory
```

### Анализ логов
```bash
# Подсчёт ошибок в логе
grep -c "ERROR" logfile.txt

# Уникальные IP-адреса в логе
grep -oE '[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}' access.log | sort | uniq
```

## Контрольные вопросы для самопроверки

1. Что такое дискреционная модель доступа?
2. Как работают права доступа в Linux?
3. Что такое процесс и каковы его основные атрибуты?
4. Какие основные сигналы вы знаете и для чего они используются?
5. Что такое системные вызовы и чем они отличаются от библиотечных функций?
6. Как найти процесс, потребляющий больше всего памяти?
7. Как создать архив сжатой директории?

## Следующие шаги

После завершения этого занятия вы будете готовы к изучению более продвинутых тем работы с процессами, включая отладку, трассировку и анализ производительности. На следующем занятии мы рассмотрим структуру данных для описания процессов, способы взаимодействия процессов и инструменты для отладки.

## Обратная связь

Если у вас есть вопросы или предложения по улучшению материалов, пожалуйста, сообщите преподавателю. Ваша обратная связь поможет сделать курс лучше!
