# День 2: Как запускается компьютер и работа с дисками

## Теоретическая часть (лекция): Процесс загрузки компьютера

### 1. Включение компьютера и POST
- Что происходит при нажатии кнопки питания
- Power-On Self Test (POST) - самотестирование при включении
- Роль BIOS/UEFI в начальной загрузке
- Поиск загрузочного устройства

### 2. BIOS и UEFI
- Различия между BIOS и UEFI
- Таблица разделов MBR vs GPT
- Безопасная загрузка (Secure Boot)
- Настройки BIOS/UEFI

### 3. Загрузчик операционной системы
- Что такое загрузчик (bootloader)
- GRUB (GRand Unified Bootloader) - самый популярный загрузчик Linux
- Структура конфигурации GRUB
- Режимы восстановления и отладки

### 4. Ядро операционной системы (Kernel)
- Что такое ядро и его функции
- initrd и initramfs - начальный RAM-диск
- Декомпрессия ядра и инициализация
- Монтирование корневой файловой системы

### 5. Инициализация системы
- Процесс init (первый процесс с PID 1)
- Systemd vs SysVinit vs Upstart
- Уровни запуска (runlevels)
- Запуск системных служб и демонов

### 6. Файловая система
- Что такое файловая система
- Основные типы файловых систем (ext4, XFS, Btrfs)
- Структура файловой системы Linux (FHS - Filesystem Hierarchy Standard)
- Монтирование файловых систем

### 7. Журналирование и диагностика
- Системные журналы: dmesg, syslog, journalctl
- Уровни логирования
- Анализ ошибок загрузки
- Диагностика проблем с загрузкой

## Практическая часть: Работа с дисками и RAID массивами

### 1. Работа с дисками в Linux
- Идентификация дисков в системе
- Разметка дисков: fdisk, gdisk, parted
- Форматирование разделов
- Монтирование и автоматическое монтирование

### 2. RAID массивы
- Что такое RAID и его уровни (0, 1, 5, 6, 10)
- Программный RAID в Linux (mdadm)
- Создание и управление RAID массивами
- Мониторинг состояния RAID

### 3. LVM (Logical Volume Manager)
- Что такое LVM и его преимущества
- Физические тома, группы томов, логические тома
- Создание и управление LVM
- Снапшоты и изменение размера томов

### 4. Диагностика и восстановление
- Проверка файловых систем (fsck)
- Восстановление поврежденных RAID массивов
- Резервное копирование и восстановление
- Инструменты для диагностики дисков

## Практическое задание: Установка Arch Linux с RAID

### Цель
Научиться устанавливать Linux с нуля с использованием RAID массива для обеспечения отказоустойчивости.

### Задачи
1. Подготовка виртуальной среды:
   - Создание виртуальной машины с 2 виртуальными дисками
   - Настройка параметров виртуальной машины

2. Разметка дисков и создание RAID:
   - Разметка двух дисков идентичным образом
   - Создание RAID1 массива для корневой файловой системы
   - Создание отдельных разделов для /boot и swap

3. Установка Arch Linux:
   - Базовая установка системы
   - Настройка загрузчика для работы с RAID
   - Конфигурация системы

4. Проверка работоспособности:
   - Проверка состояния RAID массива
   - Тестирование отказоустойчивости
   - Восстановление после имитации сбоя диска

## Дополнительные материалы

### Команды для работы с дисками
- `lsblk` - отображение блочных устройств
- `fdisk -l` - информация о разделах дисков
- `gdisk` - работа с GPT разделами
- `parted` - универсальный инструмент для разметки
- `mkfs` - создание файловой системы
- `mount`/`umount` - монтирование/размонтирование
- `df -h` - информация о смонтированных файловых системах
- `du -sh` - использование дискового пространства

### Команды для работы с RAID
- `mdadm --create` - создание RAID массива
- `mdadm --detail` - информация о RAID массиве
- `mdadm --fail` - пометить диск как сбойный
- `mdadm --remove` - удалить диск из массива
- `mdadm --add` - добавить диск в массив
- `cat /proc/mdstat` - статус RAID массивов

### Команды для работы с LVM
- `pvcreate` - создание физического тома
- `vgcreate` - создание группы томов
- `lvcreate` - создание логического тома
- `lvextend` - расширение логического тома
- `lvreduce` - уменьшение логического тома
- `lvdisplay` - информация о логических томах

### Полезные ресурсы
- [Arch Linux Installation Guide](https://wiki.archlinux.org/title/Installation_guide)
- [Linux RAID wiki](https://wiki.archlinux.org/title/RAID)
- [LVM wiki](https://wiki.archlinux.org/title/LVM)
- [Systemd boot process](https://www.freedesktop.org/software/systemd/man/bootup.html)

## Проверка знаний
1. Что происходит на этапе POST при включении компьютера?
2. В чем разница между BIOS и UEFI?
3. Что такое initrd и зачем он нужен?
4. Какие уровни RAID вы знаете и в чем их различия?
5. Как проверить состояние RAID массива в Linux?
6. Что такое LVM и какие преимущества он дает?

## Домашнее задание
1. Изучить процесс загрузки вашей операционной системы
2. Проанализировать системные журналы на предмет ошибок загрузки
3. Создать виртуальную машину с программным RAID массивом
4. Подготовить отчет о проделанной работе с анализом преимуществ и недостатков RAID

## Критерии выполнения
- [ ] Понимание процесса загрузки компьютера
- [ ] Умение работать с дисками и разделами
- [ ] Навыки создания и управления RAID массивами
- [ ] Успешная установка Arch Linux с RAID
- [ ] Выполнено домашнее задание
